<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Color Converter — CMYK · RGB · HLS</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#2dd4bf;
      --glass: rgba(255,255,255,0.03);
      --text: #E6EEF3;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#071024 0%, #0b1220 100%);
      color:var(--text);
      padding:24px;
      min-height:100vh;
      -webkit-font-smoothing:antialiased;
    }
    h1{margin:0 0 14px;font-size:20px}
    .container{
      max-width:1100px;
      margin:0 auto;
      display:grid;
      gap:18px;
      grid-template-columns: 380px 1fr;
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
      padding:16px;
      border-radius:12px;
      box-shadow: 0 6px 24px rgba(2,6,23,0.6);
    }
    .preview{
      border-radius:8px;
      height:120px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      font-size:18px;
      color:rgba(0,0,0,0.75);
      margin-bottom:12px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
    }
    .group{
      display:grid;
      gap:8px;
      margin-bottom:14px;
    }
    .row{
      display:flex;
      gap:8px;
      align-items:center;
    }
    label{font-size:12px;color:#98a0ab;min-width:36px}
    input[type="number"]{
      width:70px;padding:6px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);
      background:var(--glass); color:var(--text);
    }
    input[type="range"]{flex:1}
    .field{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .palette{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .swatch{
      width:28px;height:28px;border-radius:6px;border:1px solid rgba(255,255,255,0.06);
      cursor:pointer;
      box-shadow: 0 2px 6px rgba(2,6,23,0.6);
    }
    .footer-actions{display:flex;gap:8px;align-items:center}
    button{
      background:var(--accent);border:none;padding:8px 10px;border-radius:8px;color:#052023;font-weight:600;cursor:pointer;
    }
    .labels{display:flex;gap:8px;justify-content:space-between;font-size:12px;color:#98a0ab;margin-bottom:6px}
    .grid-rows{display:grid;gap:8px}
    @media (max-width:900px){
      .container{grid-template-columns: 1fr; padding:12px}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Converter: CMYK ↔ RGB ↔ HLS</h1>

      <div class="preview" id="preview">#000000</div>

      <div class="group">
        <div class="row">
          <label>HEX</label>
          <input id="color" type="color" value="#000000" />
          <input id="hexText" type="text" value="#000000" style="width:110px;padding:6px;border-radius:6px;background:var(--glass);border:1px solid rgba(255,255,255,0.03);color:var(--text)" />
          <button id="copyHex">Copy</button>
          <div style="flex:1"></div>
        </div>

        <div class="labels"><span>Palette</span><span>Click to apply</span></div>
        <div class="palette" id="palette">
          <!-- swatches filled by JS -->
        </div>

        <div class="labels"><span>Examples</span><span>Reset</span></div>
        <div class="row footer-actions">
          <button id="random">Random</button>
          <button id="reset">Reset</button>
        </div>
      </div>
    </div>

    <div class="card">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
        <div>
          <h3 style="margin-top:0;margin-bottom:8px">RGB</h3>
          <div class="grid-rows">
            <div class="field">
              <label>R</label>
              <input id="r" type="number" min="0" max="255" />
              <input id="r-range" type="range" min="0" max="255" />
            </div>
            <div class="field">
              <label>G</label>
              <input id="g" type="number" min="0" max="255" />
              <input id="g-range" type="range" min="0" max="255" />
            </div>
            <div class="field">
              <label>B</label>
              <input id="b" type="number" min="0" max="255" />
              <input id="b-range" type="range" min="0" max="255" />
            </div>
          </div>
        </div>

        <div>
          <h3 style="margin-top:0;margin-bottom:8px">CMYK (%)</h3>
          <div class="grid-rows">
            <div class="field">
              <label>C</label>
              <input id="c" type="number" min="0" max="100" />
              <input id="c-range" type="range" min="0" max="100" />
            </div>
            <div class="field">
              <label>M</label>
              <input id="m" type="number" min="0" max="100" />
              <input id="m-range" type="range" min="0" max="100" />
            </div>
            <div class="field">
              <label>Y</label>
              <input id="y" type="number" min="0" max="100" />
              <input id="y-range" type="range" min="0" max="100" />
            </div>
            <div class="field">
              <label>K</label>
              <input id="k" type="number" min="0" max="100" />
              <input id="k-range" type="range" min="0" max="100" />
            </div>
          </div>
        </div>

        <div style="grid-column:1 / -1">
          <h3 style="margin-top:12px;margin-bottom:8px">HLS (Hue - Lightness - Saturation)</h3>
          <div class="grid-rows">
            <div class="field">
              <label>H</label>
              <input id="h" type="number" min="0" max="360" />
              <input id="h-range" type="range" min="0" max="360" />
            </div>
            <div class="field">
              <label>L</label>
              <input id="l" type="number" min="0" max="100" />
              <input id="l-range" type="range" min="0" max="100" />
            </div>
            <div class="field">
              <label>S</label>
              <input id="s" type="number" min="0" max="100" />
              <input id="s-range" type="range" min="0" max="100" />
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

<script>
/* Element bindings */
const colorInput = document.getElementById('color');
const hexText = document.getElementById('hexText');
const preview = document.getElementById('preview');

const rInput = document.getElementById('r'), gInput = document.getElementById('g'), bInput = document.getElementById('b');
const rRange = document.getElementById('r-range'), gRange = document.getElementById('g-range'), bRange = document.getElementById('b-range');

const cInput = document.getElementById('c'), mInput = document.getElementById('m'), yInput = document.getElementById('y'), kInput = document.getElementById('k');
const cRange = document.getElementById('c-range'), mRange = document.getElementById('m-range'), yRange = document.getElementById('y-range'), kRange = document.getElementById('k-range');

const hInput = document.getElementById('h'), lInput = document.getElementById('l'), sInput = document.getElementById('s');
const hRange = document.getElementById('h-range'), lRange = document.getElementById('l-range'), sRange = document.getElementById('s-range');

const copyHex = document.getElementById('copyHex');
const randomBtn = document.getElementById('random');
const resetBtn = document.getElementById('reset');
const paletteEl = document.getElementById('palette');

let suppress = false; // flag to avoid circular update loops

/* Utilities */
function clamp(v, a, b){ v = Number(v); if (isNaN(v)) return a; return Math.max(a, Math.min(b, v)); }

function rgbToHex(r,g,b){
  r = clamp(Math.round(r),0,255);
  g = clamp(Math.round(g),0,255);
  b = clamp(Math.round(b),0,255);
  return '#' + [r,g,b].map(x => x.toString(16).padStart(2,'0')).join('').toUpperCase();
}
function hexToRgb(hex){
  if (!hex) return [0,0,0];
  hex = hex.replace('#','').trim();
  if (hex.length === 3) hex = hex.split('').map(c=>c+c).join('');
  if (hex.length !== 6) return [0,0,0];
  const n = parseInt(hex,16);
  return [(n>>16)&255, (n>>8)&255, n&255];
}

/* CMYK <-> RGB */
function cmykToRgb(c,m,y,k){
  c = clamp(Number(c),0,100)/100;
  m = clamp(Number(m),0,100)/100;
  y = clamp(Number(y),0,100)/100;
  k = clamp(Number(k),0,100)/100;
  const r = 255 * (1 - c) * (1 - k);
  const g = 255 * (1 - m) * (1 - k);
  const b = 255 * (1 - y) * (1 - k);
  return [Math.round(r), Math.round(g), Math.round(b)];
}
function rgbToCmyk(r,g,b){
  r = clamp(Number(r),0,255)/255;
  g = clamp(Number(g),0,255)/255;
  b = clamp(Number(b),0,255)/255;
  const k = 1 - Math.max(r,g,b);
  if (k >= 1 - 1e-9) {
    return [0,0,0,100];
  }
  const c = (1 - r - k) / (1 - k);
  const m = (1 - g - k) / (1 - k);
  const y = (1 - b - k) / (1 - k);
  return [ Math.round(c*100), Math.round(m*100), Math.round(y*100), Math.round(k*100) ];
}

/* RGB <-> HSL (HLS) */
/* rgbToHsl returns [H (0..360), L (0..100), S (0..100)] */
function rgbToHsl(r,g,b){
  r = clamp(Number(r),0,255)/255;
  g = clamp(Number(g),0,255)/255;
  b = clamp(Number(b),0,255)/255;
  const max = Math.max(r,g,b), min = Math.min(r,g,b);
  let h = 0, s = 0;
  const l = (max + min) / 2;
  const d = max - min;
  if (d !== 0){
    s = d / (1 - Math.abs(2*l - 1));
    if (max === r) {
      h = ((g - b) / d) % 6;
    } else if (max === g) {
      h = (b - r) / d + 2;
    } else {
      h = (r - g) / d + 4;
    }
    h = Math.round(h * 60);
    if (h < 0) h += 360;
  } else {
    h = 0;
    s = 0;
  }
  return [ Math.round(h), Math.round(l * 100), Math.round(s * 100) ];
}

/* hslToRgb accepts h (0..360), l (0..100), s (0..100) */
function hslToRgb(h,l,s){
  h = clamp(Number(h),0,360);
  l = clamp(Number(l),0,100)/100;
  s = clamp(Number(s),0,100)/100;
  const c = (1 - Math.abs(2*l - 1)) * s;
  const hh = h / 60;
  const x = c * (1 - Math.abs(hh % 2 - 1));
  let r1=0,g1=0,b1=0;
  if (0 <= hh && hh < 1){ r1=c; g1=x; b1=0; }
  else if (1 <= hh && hh < 2){ r1=x; g1=c; b1=0; }
  else if (2 <= hh && hh < 3){ r1=0; g1=c; b1=x; }
  else if (3 <= hh && hh < 4){ r1=0; g1=x; b1=c; }
  else if (4 <= hh && hh < 5){ r1=x; g1=0; b1=c; }
  else { r1=c; g1=0; b1=x; }
  const m = l - c/2;
  const r = Math.round((r1 + m) * 255);
  const g = Math.round((g1 + m) * 255);
  const b = Math.round((b1 + m) * 255);
  return [ clamp(r,0,255), clamp(g,0,255), clamp(b,0,255) ];
}

/* Updates — three directions */
function updateFromRGB(){
  if (suppress) return;
  suppress = true;
  const r = clamp(Number(rInput.value),0,255);
  const g = clamp(Number(gInput.value),0,255);
  const b = clamp(Number(bInput.value),0,255);

  // HEX
  const hex = rgbToHex(r,g,b);
  colorInput.value = hex;
  hexText.value = hex;
  preview.style.background = hex;
  preview.textContent = hex;

  // CMYK
  const cmyk = rgbToCmyk(r,g,b);
  [cInput.value, mInput.value, yInput.value, kInput.value] = cmyk;
  [cRange.value, mRange.value, yRange.value, kRange.value] = cmyk;

  // HLS
  const hls = rgbToHsl(r,g,b);
  [hInput.value, lInput.value, sInput.value] = hls;
  [hRange.value, lRange.value, sRange.value] = hls;

  // sync ranges
  rRange.value = r; gRange.value = g; bRange.value = b;

  suppress = false;
}

function updateFromCMYK(){
  if (suppress) return;
  suppress = true;
  const c = clamp(Number(cInput.value),0,100);
  const m = clamp(Number(mInput.value),0,100);
  const y = clamp(Number(yInput.value),0,100);
  const k = clamp(Number(kInput.value),0,100);

  const [r,g,b] = cmykToRgb(c,m,y,k);
  rInput.value = r; gInput.value = g; bInput.value = b;
  rRange.value = r; gRange.value = g; bRange.value = b;

  const hex = rgbToHex(r,g,b);
  colorInput.value = hex;
  hexText.value = hex;
  preview.style.background = hex;
  preview.textContent = hex;

  const hls = rgbToHsl(r,g,b);
  [hInput.value, lInput.value, sInput.value] = hls;
  [hRange.value, lRange.value, sRange.value] = hls;

  [cRange.value, mRange.value, yRange.value, kRange.value] = [c,m,y,k];

  suppress = false;
}

function updateFromHLS(){
  if (suppress) return;
  suppress = true;
  const h = clamp(Number(hInput.value),0,360);
  const l = clamp(Number(lInput.value),0,100);
  const s = clamp(Number(sInput.value),0,100);

  const [r,g,b] = hslToRgb(h,l,s);
  rInput.value = r; gInput.value = g; bInput.value = b;
  rRange.value = r; gRange.value = g; bRange.value = b;

  const hex = rgbToHex(r,g,b);
  colorInput.value = hex;
  hexText.value = hex;
  preview.style.background = hex;
  preview.textContent = hex;

  const cmyk = rgbToCmyk(r,g,b);
  [cInput.value, mInput.value, yInput.value, kInput.value] = cmyk;
  [cRange.value, mRange.value, yRange.value, kRange.value] = cmyk;

  [hRange.value, lRange.value, sRange.value] = [h,l,s];

  suppress = false;
}

/* Listeners: color picker / hex text */
colorInput.addEventListener('input', () => {
  // if another update is running, ignore this event
  if (suppress) return;
  const hex = colorInput.value;
  hexText.value = hex;
  const [r,g,b] = hexToRgb(hex);
  rInput.value = r; gInput.value = g; bInput.value = b;
  rRange.value = r; gRange.value = g; bRange.value = b;

  updateFromRGB();
});
hexText.addEventListener('change', () => {
  const v = hexText.value.trim();
  try {
    const [r,g,b] = hexToRgb(v);
    colorInput.value = rgbToHex(r,g,b);
    rInput.value = r; gInput.value = g; bInput.value = b;
    updateFromRGB();
  } catch (e){}
});

/* Copy hex */
copyHex.addEventListener('click', async () => {
  try {
    await navigator.clipboard.writeText(hexText.value);
    copyHex.textContent = 'Copied';
    setTimeout(()=>copyHex.textContent='Copy',900);
  } catch (e){
    copyHex.textContent = 'Error';
    setTimeout(()=>copyHex.textContent='Copy',900);
  }
});

/* Random / reset */
randomBtn.addEventListener('click', () => {
  const r = Math.floor(Math.random()*256);
  const g = Math.floor(Math.random()*256);
  const b = Math.floor(Math.random()*256);
  rInput.value=r; gInput.value=g; bInput.value=b;
  updateFromRGB();
});
resetBtn.addEventListener('click', () => {
  // reset to black (changeable)
  rInput.value = 0; gInput.value = 0; bInput.value = 0;
  updateFromRGB();
});

/* RGB listeners */
[rRange, gRange, bRange].forEach(el => {
  el.addEventListener('input', (e) => {
    const id = e.target.id;
    if (id === 'r-range') rInput.value = e.target.value;
    if (id === 'g-range') gInput.value = e.target.value;
    if (id === 'b-range') bInput.value = e.target.value;
    updateFromRGB();
  });
});
[rInput, gInput, bInput].forEach(el => {
  el.addEventListener('input', (e) => {
    e.target.value = clamp(Number(e.target.value), Number(e.target.min||0), Number(e.target.max||255));
    if (el === rInput) rRange.value = e.target.value;
    if (el === gInput) gRange.value = e.target.value;
    if (el === bInput) bRange.value = e.target.value;
    updateFromRGB();
  });
});

/* CMYK listeners */
[cRange,mRange,yRange,kRange].forEach(el=>{
  el.addEventListener('input', (e)=>{
    const id = e.target.id;
    if (id==='c-range') cInput.value = e.target.value;
    if (id==='m-range') mInput.value = e.target.value;
    if (id==='y-range') yInput.value = e.target.value;
    if (id==='k-range') kInput.value = e.target.value;
    updateFromCMYK();
  });
});
[cInput,mInput,yInput,kInput].forEach(el=>{
  el.addEventListener('input', (e)=>{
    e.target.value = clamp(Number(e.target.value), 0, 100);
    if (el===cInput) cRange.value = e.target.value;
    if (el===mInput) mRange.value = e.target.value;
    if (el===yInput) yRange.value = e.target.value;
    if (el===kInput) kRange.value = e.target.value;
    updateFromCMYK();
  });
});

/* HLS listeners */
[hRange,lRange,sRange].forEach(el=>{
  el.addEventListener('input', (e)=>{
    const id = e.target.id;
    if (id==='h-range') hInput.value = e.target.value;
    if (id==='l-range') lInput.value = e.target.value;
    if (id==='s-range') sInput.value = e.target.value;
    updateFromHLS();
  });
});
[hInput,lInput,sInput].forEach(el=>{
  el.addEventListener('input', (e)=>{
    const id = e.target.id;
    if (id==='h') hRange.value = clamp(Number(e.target.value),0,360);
    if (id==='l') lRange.value = clamp(Number(e.target.value),0,100);
    if (id==='s') sRange.value = clamp(Number(e.target.value),0,100);
    updateFromHLS();
  });
});

/* Palette — swatches */
const defaultSwatches = [
  '#000000','#FFFFFF','#FF0000','#00FF00','#0000FF',
  '#FFFF00','#00FFFF','#FF00FF'
];
function buildPalette(){
  paletteEl.innerHTML = '';
  defaultSwatches.forEach(hex => {
    const s = document.createElement('div');
    s.className = 'swatch';
    s.style.background = hex;
    s.title = hex;
    s.addEventListener('click', () => {
    // set the color picker value so the centralized color->hex handler runs
    colorInput.value = hex;
    // also update numeric inputs and range controls (some browsers may not fire all events)
    const [r,g,b] = hexToRgb(hex);
    rInput.value = r; gInput.value = g; bInput.value = b;
    rRange.value = r; gRange.value = g; bRange.value = b;
    // dispatch an input event on the color picker which will call updateFromRGB()
    colorInput.dispatchEvent(new Event('input', { bubbles: true }));
  });
    paletteEl.appendChild(s);
  });
}
buildPalette();

/* Initialize default values (example: black) */
document.addEventListener('DOMContentLoaded', () => {
  // initial RGB 0,0,0
  rInput.value = 0; gInput.value = 0; bInput.value = 0;
  rRange.value = 0; gRange.value = 0; bRange.value = 0;
  updateFromRGB();
});
</script>
</body>
</html>
